<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="view_stock_forecast_tree" model="ir.ui.view">
        <field name="name">stock.forecast.tree</field>
        <field name="model">stock.forecast</field>
        <field name="arch" type="xml">
            <tree editable="bottom" decoration-danger="need_reorder==True">
                <field name="need_reorder" readonly="1" column_invisible="True"/>
                <field name="default_code" string="Referencia" readonly="1"/>
                <field name="product_name" string="Descripci贸n" readonly="1"/>
                <field name="months_history" string="Meses Hist."/>
                <field name="total_sold" string="Ventas" readonly="1"/>
                <field name="monthly_average" string="Media Mes" readonly="1"/>
                <field name="current_stock" string="Stock Mano" readonly="1"/>
                <field name="forecast_months" string="Meses Previsi贸n"/>
                <field name="incoming_stock" string="Stock Entrante" readonly="1"/>
                
                <button name="action_view_incoming_stock_moves"
                        type="object"
                        icon="fa-search-plus"
                        string="Ver Detalle"
                        aria-label="Ver Detalle Entrante"/>
                
                <field name="total_available_stock" string="Stock Total" readonly="1"/>
                <field name="coverage_months" string="Meses Cobertura (Meses2)" readonly="1"/>
            </tree>
        </field>
    </record>

    <record id="action_stock_forecast" model="ir.actions.act_window">
        <field name="name">Previsi贸n de Stock</field>
        <field name="res_model">stock.forecast</field>
        <field name="view_mode">tree</field>
        <field name="target">current</field>
        <field name="context">{}</field>
    </record>

    <menuitem 
        id="menu_stock_forecast_main" 
        name="Previsi贸n de Stock" 
        parent="purchase.menu_purchase_root"
        action="action_stock_forecast"
        sequence="90"
    />

    <record id="action_forecast_pedir" model="ir.actions.server">
        <field name="name">Pedir</field>
        <field name="model_id" ref="model_stock_forecast"/>
        <field name="binding_model_id" ref="model_stock_forecast"/>
        <field name="binding_view_types">list</field>
        <field name="state">code</field>
        <field name="code">
action = records.action_launch_order_wizard()
        </field>
    </record>

</odoo>